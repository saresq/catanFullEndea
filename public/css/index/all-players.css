.all-players {
  position: fixed; right: 0; top: 0;
  width: 240px;
  filter: drop-shadow(0px 0px 30px #000);
  &.blur:not(:hover) { filter: blur(2px); }

  .players-header {
    display: flex; justify-content: flex-end; align-items: center;
    background: var(--sand-color-dark); color: #fff; padding: 2px 4px;
    border-left: 3px solid var(--sand-color-dark);
    button.toggle-players {
      appearance: none; border: none; cursor: pointer;
      font-size: 14px; line-height: 1; padding: 4px 6px; border-radius: 3px;
      background: #333; color: #fff;
      &:hover { background: #000; }
      &:focus { outline: 1px solid #fff7; }
    }
  }

  .player {
    width: 100%; position: relative;
    background: var(--sand-color);
    border: 3px solid var(--sand-color-dark);
    border-top: none; border-right: none;
    margin: 0 -3px;
    &.deactivated {
      filter: grayscale(1) contrast(0.5) brightness(0.7); cursor: not-allowed;
      &::before { content: 'üèÉ' !important;}
    }

    &::before {
      position: absolute; left: -60px; top: 0px;
      font-size: 3em; filter: drop-shadow(0px 0px 3px #000);
    }

    &.p1 { background: var(--player-1-color-light); border-color: var(--player-1-color-dark); }
    &.p2 { background: var(--player-2-color-light); border-color: var(--player-2-color-dark); }
    &.p3 { background: var(--player-3-color-light); border-color: var(--player-3-color-dark); }
    &.p4 { background: var(--player-4-color-light); border-color: var(--player-4-color-dark); }
    &.p5 { background: var(--player-5-color-light); border-color: var(--player-5-color-dark); }
    &.p6 { background: var(--player-6-color-light); border-color: var(--player-6-color-dark); }
    &.p7 { background: var(--player-7-color-light); border-color: var(--player-7-color-dark); }
    &.p8 { background: var(--player-8-color-light); border-color: var(--player-8-color-dark); }

    .name {
      width: 100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;
      font-size: 2em;
      padding: 5px 10px 10px;
      background: var(--sand-color-dark); color: #fff;
      border-bottom: 3px solid; border-color: inherit;
      width: 100%; box-sizing: border-box;
    }
    &.p1 .name { background: var(--player-1-color); }
    &.p2 .name { background: var(--player-2-color); }
    &.p3 .name { background: var(--player-3-color); }
    &.p4 .name { background: var(--player-4-color); }
    &.p5 .name { background: var(--player-5-color); }
    &.p6 .name { background: var(--player-6-color); }
    &.p7 .name { background: var(--player-7-color); }
    &.p8 .name { background: var(--player-8-color); }

    .victory-points {
      display: flex; justify-content: start; font-family: Raleway, sans-serif;
      font-size: 2.2em; padding: 0px 10px; border-bottom: 1px solid; border-color: inherit;

      & span {
        margin-right: 5px; margin-left: 30px;
        position: relative;
        display: flex; align-items: center;

        &::after {
          content: "";
          position: absolute; left: -30px;
          width: 20px; height: 20px;
          box-shadow: 2px 2px 5px -1px #000, 0 0 5px 0px #000;
          background: url(/images/catan-bg.png) -27px -12px / 74px;
          border-radius: 50px;
        }
      }

      &::after {
        content: 'Victory\APoints';
        font-size: 0.8rem; opacity: .5;
        vertical-align: super; white-space: pre;
        display: flex; flex-direction: column; justify-content: center;
      }
    }

    .cards-container {
      overflow: hidden; display: flex; padding: 5px 5px 5px 10px;
    }

    .resources, .development-cards {
      background-size: cover;
      &[data-count="0"] { filter: grayscale(1) brightness(1.5) contrast(0.5); }
      &[data-robbable="true"] {
        box-shadow: 0px 0px 5px 2px var(--trade-negative);
        &::after {
          content: 'ü•∑' attr(data-count); width: 100%;
          text-align: center; box-sizing: border-box;
          border-right: 0; border-radius: 0; padding: 0;
          background: var(--trade-negative); color: #fff;
        }
      }
    }
    .resources { background-image: url(/images/resources-back.png); margin-right: 5px; }
    .development-cards { background-image: url(/images/dc-back.png); background-size: 31px; background-position-y: -1px; }

    .largest-army, .longest-road {
      &::before {
        content: ''; display: block; width: 100%; height: 100%;
        background-image: url(/images/extra-vps-sprite.png);
        background-color: #c8b66d; background-size: 155px; background-repeat: no-repeat;
        filter: grayscale(1) brightness(2) contrast(0.5);
      }
      &[data-count="0"]::after { filter: grayscale(1) brightness(1.5) contrast(0.5); }
    }
    .largest-army {
      &::before{ background-position: -43px -54px; background-size: 200px; }
    }
    .longest-road {
      &::before{ background-position: -185px -68px; background-size: 230px; }
    }

    :is(.largest-army, .longest-road, .resources, .development-cards) {
      width: 30px; height: 44px;
      position: relative; margin-right: 5px;
      /* box-shadow: 0 0 3px 1px #0003; */ border-radius: 3px; overflow: hidden;
      border: 1px solid #666;
      &::after {
        content: attr(data-count);
        display: inline-block;
        position: absolute; bottom: 0; left: 0;
        color: #000;
        font-size: 1em; font-family: monospace;
        background: #fff;
        border-top: 1px solid #666;
        border-right: 1px solid #666;
        border-top-right-radius: 3px;
        padding: 2px 4px;
      }
    }
  }

  &[data-active="1"] .player.p1::before
  , &[data-active="2"] .player.p2::before
  , &[data-active="3"] .player.p3::before
  , &[data-active="4"] .player.p4::before
  , &[data-active="5"] .player.p5::before
  , &[data-active="6"] .player.p6::before
  , &[data-active="7"] .player.p7::before
  , &[data-active="8"] .player.p8::before
  { content: 'üëâ'; }


  &[data-army="1"] .player.p1 .largest-army
  , &[data-army="2"] .player.p2 .largest-army
  , &[data-army="3"] .player.p3 .largest-army
  , &[data-army="4"] .player.p4 .largest-army
  , &[data-army="5"] .player.p5 .largest-army
  , &[data-army="6"] .player.p6 .largest-army
  , &[data-army="7"] .player.p7 .largest-army
  , &[data-army="8"] .player.p8 .largest-army
  , &[data-road="1"] .player.p1 .longest-road
  , &[data-road="2"] .player.p2 .longest-road
  , &[data-road="3"] .player.p3 .longest-road
  , &[data-road="4"] .player.p4 .longest-road
  , &[data-road="5"] .player.p5 .longest-road
  , &[data-road="6"] .player.p6 .longest-road
  , &[data-road="7"] .player.p7 .longest-road
  , &[data-road="8"] .player.p8 .longest-road
  {
    width: 67px; cursor: pointer;
    &:hover { box-shadow: 0 0 5px 0 #333; }
    &::before { filter: none; background-size: 160px; }
    &.largest-army::before { background-position: -9px -37px; }
    &.longest-road::before { background-position: -84px -37px; }
    &::after { font-size: 1.3em; color: #fff; padding: 2px 5px; }
  }

  &[data-army="1"] .player.p1 .largest-army::after, &[data-road="1"] .player.p1 .longest-road::after {
    background: var(--player-1-color);
  }
  &[data-army="2"] .player.p2 .largest-army::after, &[data-road="2"] .player.p2 .longest-road::after {
    background: var(--player-2-color);
  }
  &[data-army="3"] .player.p3 .largest-army::after, &[data-road="3"] .player.p3 .longest-road::after {
    background: var(--player-3-color);
  }
  &[data-army="4"] .player.p4 .largest-army::after, &[data-road="4"] .player.p4 .longest-road::after {
    background: var(--player-4-color);
  }
  &[data-army="5"] .player.p5 .largest-army::after, &[data-road="5"] .player.p5 .longest-road::after {
    background: var(--player-5-color);
  }
  &[data-army="6"] .player.p6 .largest-army::after, &[data-road="6"] .player.p6 .longest-road::after {
    background: var(--player-6-color);
  }
  &[data-army="7"] .player.p7 .largest-army::after, &[data-road="7"] .player.p7 .longest-road::after {
    background: var(--player-7-color);
  }
  &[data-army="8"] .player.p8 .largest-army::after, &[data-road="8"] .player.p8 .longest-road::after {
    background: var(--player-8-color);
  }

  &.compact {
    width: 240px; /* keep width; we only hide details */
    .player {
      .victory-points, .cards-container { display: none; }
      .name { font-size: 1.1em; padding: 6px 10px; border-bottom-width: 0; }
      &::before { top: -15px; }
    }
  }
}


/* Support color-based classes (pc1..pc8) to reflect selected colors in scoreboard */
.all-players .player.pc1 { background: var(--player-1-color-light); border-color: var(--player-1-color-dark); }
.all-players .player.pc2 { background: var(--player-2-color-light); border-color: var(--player-2-color-dark); }
.all-players .player.pc3 { background: var(--player-3-color-light); border-color: var(--player-3-color-dark); }
.all-players .player.pc4 { background: var(--player-4-color-light); border-color: var(--player-4-color-dark); }
.all-players .player.pc5 { background: var(--player-5-color-light); border-color: var(--player-5-color-dark); }
.all-players .player.pc6 { background: var(--player-6-color-light); border-color: var(--player-6-color-dark); }
.all-players .player.pc7 { background: var(--player-7-color-light); border-color: var(--player-7-color-dark); }
.all-players .player.pc8 { background: var(--player-8-color-light); border-color: var(--player-8-color-dark); }
.all-players .player.pc1 .name { background: var(--player-1-color); }
.all-players .player.pc2 .name { background: var(--player-2-color); }
.all-players .player.pc3 .name { background: var(--player-3-color); }
.all-players .player.pc4 .name { background: var(--player-4-color); }
.all-players .player.pc5 .name { background: var(--player-5-color); }
.all-players .player.pc6 .name { background: var(--player-6-color); }
.all-players .player.pc7 .name { background: var(--player-7-color); }
.all-players .player.pc8 .name { background: var(--player-8-color); }
