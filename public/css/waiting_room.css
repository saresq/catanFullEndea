@import "/css/index/accessibility.css";
@import "/css/index/alert.css";
@import "/css/constants.css";
@import "/css/fonts.css";

:root {
  --title-padding: .8em 20px .2em;
  --box-width: 500px;
}

@media screen and (max-width: 800px) {
  :root { --title-padding: 2em 20px 1em; --box-width: 90%; }
}
@media screen and (max-width: 450px) {
  :root { --title-padding: 2em 10px 1em; }
}

html { height: 100%; }
body {
  height: 100%; padding: 0; margin: 0;
  background: url(/images/catan-bg.png) center/cover;
  backdrop-filter: blur(50px);
  transition: all linear .5s;
}

button {
  display: block;
  background: none; color: inherit; border: none;
  font: inherit; cursor: pointer;
  outline: inherit; appearance: unset;
  padding: 0; padding-block: 0px; padding-inline: 0px;
}

#waiting-room {
  display: flex; flex-wrap: wrap; align-content: flex-start;
  font-family: EagleLake;
  &.hide { opacity: 0; transition: opacity .5s 1.5s linear; }

  .title {
    position: absolute; top: 0; left: 0; width: 100%;
    text-align: center; cursor: default;
    .colored { border-bottom: 2px solid var(--sand-color-dark); background-color: var(--sand-color); }
    .name { font-size: 1em; color: #0006; }
    .text {
      margin-bottom: 10px; margin-top: -5px; font-size: 2em;
      text-align: center; position: relative; color: var(--sand-color-text-dark); cursor: copy;
      transition: all .15s ease;
      svg { transform: scale(1.3); margin-left: 5px; opacity: 0.7; }
      &:hover{
        filter: drop-shadow(0 0 5px #fff) drop-shadow(0 0 2px #fff);
        &::after {
          content: 'Copy'; position: absolute; bottom: -20px; left: calc(50% - 30px);
          text-align: center; font-size: 1rem; font-family: Raleway;
          background-color: #000c; color: #fff; padding: 3px 10px; border-radius: 3px;
        }
      }
      &.copied:hover{
        cursor: default; filter: drop-shadow(0 0 5px #fff0) drop-shadow(0 0 2px #0000) contrast(0.5);
        &::after { content: 'Copied!'; }
      }
    }
  }

  > .container { width: var(--box-width); margin: 120px auto 30px; }
  .wait-box {
    background: #fff3; box-shadow: 0 0px 40px #0009; border-radius: 10px; backdrop-filter: blur(6px);
    padding: 20px; box-sizing: border-box;
    margin-top: 5em;
  }
  .box-header {
    display: flex; gap: 10px; flex-wrap: wrap; align-items: center; justify-content: center;
    font-family: Raleway, sans-serif; color: #fff; filter: drop-shadow(0 0 5px #000);
    margin-bottom: 10px;
  }
  .box-header .info-item { background: #0008; padding: 6px 10px; border-radius: 6px; }
  .box-header .label { opacity: .8; margin-right: 6px; }
  .box-header .value { font-weight: 700; }

  .slots { display: flex; flex-direction: column; gap: 8px; }
  .slot {
    display: flex; align-items: center; min-height: 44px;
    background: var(--sand-color); color: #fff; border: 3px solid var(--sand-color-dark);
    border-radius: 6px; overflow: hidden;
  }
  .slot .name, .slot .empty-label { width: 100%; padding: 8px 12px; box-sizing: border-box; }
  .slot.filled .name { background: var(--sand-color-dark); }
  .slot.empty { filter: grayscale(1) contrast(0.7) brightness(0.9); }

  /* Apply player colors to filled slots */
  .slot.filled.p1 { background: var(--player-1-color-light); border-color: var(--player-1-color-dark); }
  .slot.filled.p2 { background: var(--player-2-color-light); border-color: var(--player-2-color-dark); }
  .slot.filled.p3 { background: var(--player-3-color-light); border-color: var(--player-3-color-dark); }
  .slot.filled.p4 { background: var(--player-4-color-light); border-color: var(--player-4-color-dark); }
  .slot.filled.p5 { background: var(--player-5-color-light); border-color: var(--player-5-color-dark); }
  .slot.filled.p6 { background: var(--player-6-color-light); border-color: var(--player-6-color-dark); }
  .slot.filled.p7 { background: var(--player-7-color-light); border-color: var(--player-7-color-dark); }
  .slot.filled.p8 { background: var(--player-8-color-light); border-color: var(--player-8-color-dark); }
  .slot.filled.p1 .name { background: var(--player-1-color); }
  .slot.filled.p2 .name { background: var(--player-2-color); }
  .slot.filled.p3 .name { background: var(--player-3-color); }
  .slot.filled.p4 .name { background: var(--player-4-color); }
  .slot.filled.p5 .name { background: var(--player-5-color); }
  .slot.filled.p6 .name { background: var(--player-6-color); }
  .slot.filled.p7 .name { background: var(--player-7-color); }
  .slot.filled.p8 .name { background: var(--player-8-color); }
}


/* --- Color selection UI --- */
#waiting-room .slot {
  position: relative;
}
#waiting-room .slot .city-icon {
  width: 32px; height: 32px; flex: 0 0 50px;
  background-size: contain; background-repeat: no-repeat; background-position: center;
  margin-left: 6px; filter: drop-shadow(1px 1px 2px #0006);
}
#waiting-room .slot .city-icon.clickable { cursor: pointer; }
#waiting-room .slot .name { flex: 1; width: auto; }

.color-picker-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.55);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.color-picker-overlay .picker {
  background: #fff; color: #333; padding: 16px; border-radius: 8px;
  min-width: 280px; box-shadow: 0 10px 30px #000a; font-family: Raleway, sans-serif;
}
.color-picker-overlay .picker .title { font-weight: 700; margin-bottom: 10px; text-align: center; }
.color-picker-overlay .picker .grid {
  display: grid; grid-template-columns: repeat(4, 70px); gap: 12px; justify-content: center; margin: 10px 0 6px;
}
.color-picker-overlay .picker .color-option {
  width: 60px; height: 60px; border-radius: 8px; background-size: contain; background-position: center; background-repeat: no-repeat;
  border: 2px solid #fff0; transition: transform .12s ease, border-color .12s ease;
}
.color-picker-overlay .picker .color-option:hover { transform: scale(1.06); border-color: #fff; }
.color-picker-overlay .picker .color-option.taken { opacity: .3; pointer-events: none; }
.color-picker-overlay .picker .close { margin: 0 auto; display: block; padding: 6px 10px; background: #222; color: #fff; border-radius: 6px; }


/* Support color-based classes (pc1..pc8) to reflect selected color */
#waiting-room .slot.filled.pc1 { background: var(--player-1-color-light); border-color: var(--player-1-color-dark); }
#waiting-room .slot.filled.pc2 { background: var(--player-2-color-light); border-color: var(--player-2-color-dark); }
#waiting-room .slot.filled.pc3 { background: var(--player-3-color-light); border-color: var(--player-3-color-dark); }
#waiting-room .slot.filled.pc4 { background: var(--player-4-color-light); border-color: var(--player-4-color-dark); }
#waiting-room .slot.filled.pc5 { background: var(--player-5-color-light); border-color: var(--player-5-color-dark); }
#waiting-room .slot.filled.pc6 { background: var(--player-6-color-light); border-color: var(--player-6-color-dark); }
#waiting-room .slot.filled.pc7 { background: var(--player-7-color-light); border-color: var(--player-7-color-dark); }
#waiting-room .slot.filled.pc8 { background: var(--player-8-color-light); border-color: var(--player-8-color-dark); }
#waiting-room .slot.filled.pc1 .name { background: var(--player-1-color); }
#waiting-room .slot.filled.pc2 .name { background: var(--player-2-color); }
#waiting-room .slot.filled.pc3 .name { background: var(--player-3-color); }
#waiting-room .slot.filled.pc4 .name { background: var(--player-4-color); }
#waiting-room .slot.filled.pc5 .name { background: var(--player-5-color); }
#waiting-room .slot.filled.pc6 .name { background: var(--player-6-color); }
#waiting-room .slot.filled.pc7 .name { background: var(--player-7-color); }
#waiting-room .slot.filled.pc8 .name { background: var(--player-8-color); }

/* Start Game button */
#waiting-room .box-header .start-game {
  margin-left: auto;
  background: #2b70ff;
  color: #fff;
  padding: 6px 12px;
  border-radius: 6px;
  font-family: Raleway, sans-serif;
  font-weight: 700;
  border: 2px solid #fff5;
  box-shadow: 0 2px 6px #0006;
}
#waiting-room .box-header .start-game:disabled {
  opacity: .6;
  cursor: not-allowed;
  filter: grayscale(0.2);
}
#waiting-room .box-header .start-game.hide { display: none; }
